<!DOCTYPE html>

<html lang="en">

  <head>

      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" rel="stylesheet">
      <link href="styles.css" rel="stylesheet">
      <title>Employee</title>

  </head>
  <body>
    <nav class="navbar navbar-expand-md navbar-light bg-light border">
         <a class="navbar-brand" href="/">Home</a>
         <div class="collapse navbar-collapse" id="navbar">
                 <ul class="navbar-nav mr-auto mt-2">
                     <li class="nav-item"><a class="nav-link" href="/delete-form">Delete user</a></li>
                     <li class="nav-item"><a class="nav-link" href="/put-form">Update user</a></li>
                 </ul>
         </div>
     </nav>
      <main>
        <div>
          <h1>Change user's info</h1>
          <p>Select id of a user whose info you would like to change.</p>
          <form action="/users" id="put-form">
            <div class="form-group">
                <input class="form-control" id="id" placeholder="id" type="number">
            </div>
            <p>Input the info to change, leave other fields empty.</p>
            <div class="form-group">
                <input autocomplete="off" class="form-control" id="fname" placeholder="First name" type="text">
            </div>
            <div class="form-group">
                <input class="form-control" id="lname" placeholder="Last name" type="text">
            </div>
            <div class="form-group">
                <input class="form-control" id="ysalary" placeholder="Year salary" type="number">
            </div>
            <button class="btn btn-primary" type="submit">Update user</button>
          </form>
        </div>
      </main>
      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
        $('#put-form').submit(function(e) {
          e.preventDefault();
          const id = $('#id').val();
          const fname = $('#fname').val();
          const lname = $('#lname').val();
          const ysalary = $('#ysalary').val();

          $.ajax({
            url: '/users/' + id,
            type: 'PUT',
            dataType: 'json',
            data: JSON.stringify({ id, fname, lname, ysalary }),
            success: alert("Updated user with id: " + id)
          });
        })
      </script>
    </body>
</html>
